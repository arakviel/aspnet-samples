# ASP.NET Minimal API - Custom JWT Authentication

–ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≥–æ—Ç–æ–≤–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Å—Ç—É–¥–µ–Ω—Ç–∞–º –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ —Ä–æ–±–æ—Ç–∏ JWT —Ç–æ–∫–µ–Ω—ñ–≤.

## üéØ –ù–∞–≤—á–∞–ª—å–Ω—ñ —Ü—ñ–ª—ñ

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î:

- üîê **–ö–∞—Å—Ç–æ–º–Ω—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é JWT —Ç–æ–∫–µ–Ω—ñ–≤** - –ø–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–µ–∑ –≥–æ—Ç–æ–≤–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫
- üîë **–ü—ñ–¥–ø–∏—Å —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–æ–∫–µ–Ω—ñ–≤** - HMAC SHA-256 –∞–ª–≥–æ—Ä–∏—Ç–º
- üé´ **Access —Ç–∞ Refresh —Ç–æ–∫–µ–Ω–∏** - –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞–º–∏
- üõ°Ô∏è **Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** - –∫–∞—Å—Ç–æ–º–Ω–∏–π middleware –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–∫–µ–Ω—ñ–≤
- üë• **–°–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π** - —Ä–æ–∑–º–µ–∂—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –∑–∞ —Ä–æ–ª—è–º–∏
- üóÑÔ∏è **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö** - Entity Framework Core + SQLite
- üîí **–ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** - BCrypt —Ö–µ—à—É–≤–∞–Ω–Ω—è
- üìù **–õ–æ–≥—É–≤–∞–Ω–Ω—è** - Serilog –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
AspNet.MinimalApi.CustomJwtAuth/
‚îú‚îÄ‚îÄ Models/                          # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ User.cs                     # –ú–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚îÇ   ‚îî‚îÄ‚îÄ AuthModels.cs               # DTO –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ Authentication/                  # –ö–∞—Å—Ç–æ–º–Ω–∞ JWT —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ JwtTokenGenerator.cs        # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ JwtAuthenticationOptions.cs # –û–ø—Ü—ñ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ JwtClaims.cs               # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –¥–ª—è claims
‚îú‚îÄ‚îÄ Middleware/                     # Middleware
‚îÇ   ‚îî‚îÄ‚îÄ JwtAuthenticationMiddleware.cs # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ Services/                       # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ IUserService.cs            # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤—ñ—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ UserService.cs             # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ IJwtService.cs             # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å JWT —Å–µ—Ä–≤—ñ—Å—É
‚îÇ   ‚îî‚îÄ‚îÄ JwtService.cs              # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è JWT —Å–µ—Ä–≤—ñ—Å—É
‚îú‚îÄ‚îÄ Data/                          # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ AuthDbContext.cs           # EF Core –∫–æ–Ω—Ç–µ–∫—Å—Ç
‚îú‚îÄ‚îÄ Extensions/                    # –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ JwtAuthenticationExtensions.cs # DI —Ç–∞ middleware —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ Program.cs                     # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ JwtAuth.http                   # HTTP –∑–∞–ø–∏—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
‚îî‚îÄ‚îÄ README.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **ASP.NET Core 9.0** - Minimal API
- **Entity Framework Core** - ORM –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- **SQLite** - –õ–µ–≥–∫–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
- **BCrypt.Net** - –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- **Serilog** - –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- **System.Text.Json** - –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è JSON

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
cd AspNet.MinimalApi.CustomJwtAuth
dotnet restore
```

### 2. –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É

```bash
dotnet run
```

–î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `https://localhost:7000`

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Ñ–∞–π–ª `JwtAuth.http` –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤.

## üìã API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### –ü—É–±–ª—ñ—á–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ú–µ—Ç–æ–¥ | –®–ª—è—Ö | –û–ø–∏—Å |
|-------|------|------|
| GET | `/` | –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ API |
| GET | `/public` | –ü—É–±–ª—ñ—á–Ω–∏–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó |
| POST | `/auth/register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| POST | `/auth/login` | –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |
| POST | `/auth/refresh` | –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø—É |

### –ó–∞—Ö–∏—â–µ–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ú–µ—Ç–æ–¥ | –®–ª—è—Ö | –†–æ–ª—å | –û–ø–∏—Å |
|-------|------|------|------|
| GET | `/auth/status` | Any | –°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó |
| GET | `/auth/profile` | Any | –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| GET | `/protected` | Any | –ó–∞—Ö–∏—â–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å |
| GET | `/roles/test` | Any | –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–ª–µ–π |
| GET | `/users` | Admin | –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ |
| GET | `/admin/dashboard` | Admin | –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–Ω–µ–ª—å |

## üë§ –¢–µ—Å—Ç–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

| Username | Password | Role | Email |
|----------|----------|------|-------|
| admin | admin123 | Admin | admin@example.com |
| user | user123 | User | user@example.com |
| testuser | test123 | User | test@example.com |

## üîê –Ø–∫ –ø—Ä–∞—Ü—é—î JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT —Ç–æ–∫–µ–Ω–∞

JWT —Ç–æ–∫–µ–Ω —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —Ç—Ä—å–æ—Ö —á–∞—Å—Ç–∏–Ω, —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏—Ö –∫—Ä–∞–ø–∫–∞–º–∏:

```
header.payload.signature
```

**Header (–∑–∞–≥–æ–ª–æ–≤–æ–∫):**
```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

**Payload (–∫–æ—Ä–∏—Å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è):**
```json
{
  "sub": "1",
  "username": "admin",
  "email": "admin@example.com",
  "role": "Admin",
  "token_type": "access",
  "iss": "AspNet.MinimalApi.CustomJwtAuth",
  "aud": "AspNet.MinimalApi.CustomJwtAuth.Users",
  "exp": 1640995200,
  "iat": 1640991600,
  "jti": "unique-token-id"
}
```

**Signature (–ø—ñ–¥–ø–∏—Å):**
```
HMACSHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  secret
)
```

### 2. –ü—Ä–æ—Ü–µ—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–í—Ö—ñ–¥** ‚Üí –°–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä—É—î Access —Ç–∞ Refresh —Ç–æ–∫–µ–Ω–∏
2. **–ó–∞–ø–∏—Ç –¥–æ API** ‚Üí –ö–ª—ñ—î–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î Access —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫—É `Authorization: Bearer <token>`
3. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** ‚Üí Middleware –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø—ñ–¥–ø–∏—Å, —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó —Ç–∞ claims
4. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è** ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª–µ–π —Ç–∞ –¥–æ–∑–≤–æ–ª—ñ–≤
5. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è** ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Refresh —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ Access —Ç–æ–∫–µ–Ω–∞

### 3. –ë–µ–∑–ø–µ–∫–∞

- **–ü—ñ–¥–ø–∏—Å —Ç–æ–∫–µ–Ω–∞** - HMAC SHA-256 –∑ —Å–µ–∫—Ä–µ—Ç–Ω–∏–º –∫–ª—é—á–µ–º
- **–¢–µ—Ä–º—ñ–Ω –¥—ñ—ó** - Access —Ç–æ–∫–µ–Ω–∏ –º–∞—é—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó (15 —Ö–≤ –≤ dev, 60 —Ö–≤ –≤ prod)
- **Refresh —Ç–æ–∫–µ–Ω–∏** - –î–æ–≤—à–∏–π —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó (7 –¥–Ω—ñ–≤) –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è Access —Ç–æ–∫–µ–Ω—ñ–≤
- **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** - BCrypt –∑ —Å–æ–ª—å—é
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è claims** - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ issuer, audience, expiration

## üîç –ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### JwtTokenGenerator

–û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ JWT —Ç–æ–∫–µ–Ω–∞–º–∏:

- `GenerateAccessToken()` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø—É
- `GenerateRefreshToken()` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è  
- `ValidateToken()` - –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞ —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è claims
- `CreateSignature()` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è HMAC SHA-256 –ø—ñ–¥–ø–∏—Å—É
- `VerifySignature()` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å—É —Ç–æ–∫–µ–Ω–∞

### JwtAuthenticationMiddleware

Middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:

- –í–∏—Ç—è–≥—É—î —Ç–æ–∫–µ–Ω –∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Authorization`
- –í–∞–ª—ñ–¥—É—î —Ç–æ–∫–µ–Ω —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `HttpContext.User`
- –î–æ–¥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ `HttpContext.Items`
- –õ–æ–≥—É—î —Å–ø—Ä–æ–±–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

### UserService

–°–µ—Ä–≤—ñ—Å –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏:

- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –•–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—ñ–≤
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ–ª—è–º–∏ —Ç–∞ –¥–æ–∑–≤–æ–ª–∞–º–∏
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö

## üìä –õ–æ–≥—É–≤–∞–Ω–Ω—è

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Serilog –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è:

- **Debug** - –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–æ–∫–µ–Ω–∏ —Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é
- **Information** - –£—Å–ø—ñ—à–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (–≤—Ö—ñ–¥, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è)
- **Warning** - –ù–µ–≤–¥–∞–ª—ñ —Å–ø—Ä–æ–±–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- **Error** - –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–æ–∫–µ–Ω—ñ–≤ —Ç–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
dotnet test

# –ó–∞–ø—É—Å–∫ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É
dotnet test --collect:"XPlat Code Coverage"
```

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Ñ–∞–π–ª `JwtAuth.http` –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—è–º–∏:

1. **–ü–æ–∑–∏—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó** - –£—Å–ø—ñ—à–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
2. **–ù–µ–≥–∞—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó** - –ù–µ–≤—ñ—Ä–Ω—ñ —Ç–æ–∫–µ–Ω–∏, –≤—ñ–¥—Å—É—Ç–Ω—ñ –¥–æ–∑–≤–æ–ª–∏
3. **–ì—Ä–∞–Ω–∏—á–Ω—ñ –≤–∏–ø–∞–¥–∫–∏** - –ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω—ñ —Ç–æ–∫–µ–Ω–∏, –Ω–µ–≤—ñ—Ä–Ω—ñ —Ä–æ–ª—ñ

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

### –î–ª—è –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Ü—ñ–ª–µ–π:

- –°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Azure Key Vault)
- –°–ø—Ä–æ—â–µ–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è email
- –ë–∞–∑–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –ø–æ—Ç—Ä—ñ–±–Ω–æ:

- **–ó–æ–≤–Ω—ñ—à–Ω—î –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤** (Azure Key Vault, AWS Secrets Manager)
- **HTTPS –¥–ª—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤**
- **Rate limiting** –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è brute force –∞—Ç–∞–∫–∞–º
- **–î–æ–¥–∞—Ç–∫–æ–≤–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **–ê—É–¥–∏—Ç —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** –±–µ–∑–ø–µ–∫–∏
- **–í—ñ–¥–∫–ª–∏–∫–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤** (token blacklist)

## üîÑ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ –≥–æ—Ç–æ–≤–∏–º–∏ —Ä—ñ—à–µ–Ω–Ω—è–º–∏

| –ê—Å–ø–µ–∫—Ç | –ù–∞—à–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è | ASP.NET Core Identity |
|--------|-----------------|----------------------|
| –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å | –°–µ—Ä–µ–¥–Ω—è | –í–∏—Å–æ–∫–∞ |
| –ö–æ–Ω—Ç—Ä–æ–ª—å | –ü–æ–≤–Ω–∏–π | –û–±–º–µ–∂–µ–Ω–∏–π |
| –ù–∞–≤—á–∞–ª—å–Ω–∞ —Ü—ñ–Ω–Ω—ñ—Å—Ç—å | –í–∏—Å–æ–∫–∞ | –ù–∏–∑—å–∫–∞ |
| –ü—Ä–æ–¥–∞–∫—à–µ–Ω –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å | –ü–æ—Ç—Ä–µ–±—É—î –¥–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è | –ì–æ—Ç–æ–≤–µ |
| –†–æ–∑—É–º—ñ–Ω–Ω—è JWT | –ì–ª–∏–±–æ–∫–µ | –ü–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ |

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [RFC 7519 - JSON Web Token (JWT)](https://tools.ietf.org/html/rfc7519)
- [JWT.io - JWT Debugger](https://jwt.io/)
- [OWASP JWT Security Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/JSON_Web_Token_for_Java_Cheat_Sheet.html)
- [ASP.NET Core Security Documentation](https://docs.microsoft.com/en-us/aspnet/core/security/)

## ü§ù –í–Ω–µ—Å–æ–∫

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Ü—ñ–ª–µ–π. –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤—ñ—Ç–∞—é—Ç—å—Å—è!
