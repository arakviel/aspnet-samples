# üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç - ASP.NET Core Identity Auth

## ‚ö° –ó–∞–ø—É—Å–∫ –∑–∞ 5 —Ö–≤–∏–ª–∏–Ω

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —É –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
- ‚úÖ .NET 9 SDK
- ‚úÖ IDE (Visual Studio, VS Code, Rider)

### 2. –ö–ª–æ–Ω—É–π—Ç–µ —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å:
```bash
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–ø–∫—É –ø—Ä–æ—î–∫—Ç—É
cd AspNet.MinimalApi.IdentityAuth

# –í—ñ–¥–Ω–æ–≤—ñ—Ç—å –ø–∞–∫–µ—Ç–∏
dotnet restore

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫
dotnet run
```

### 3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
- üåê **API**: https://localhost:7000
- üìñ **Swagger**: https://localhost:7000/swagger

## üß™ –®–≤–∏–¥–∫–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```bash
curl -X POST https://localhost:7000/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"Test123!"}'
```

### –ö—Ä–æ–∫ 2: –£–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É
```bash
curl -X POST https://localhost:7000/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"Test123!"}'
```

### –ö—Ä–æ–∫ 3: –°–∫–æ–ø—ñ—é–π—Ç–µ —Ç–æ–∫–µ–Ω –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
```json
{
  "tokenType": "Bearer",
  "accessToken": "eyJhbGciOiJIUzI1NiIs...",  // ‚Üê –°–∫–æ–ø—ñ—é–π—Ç–µ —Ü–µ–π —Ç–æ–∫–µ–Ω
  "expiresIn": 3600,
  "refreshToken": "CfDJ8..."
}
```

### –ö—Ä–æ–∫ 4: –û—Ç—Ä–∏–º–∞–π—Ç–µ –ø—Ä–æ—Ñ—ñ–ª—å
```bash
curl -X GET https://localhost:7000/auth/profile \
  -H "Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù_–¢–£–¢"
```

## üì± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Swagger

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ Swagger**: https://localhost:7000/swagger
2. **–ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å**: –ó–Ω–∞–π–¥—ñ—Ç—å `POST /register` ‚Üí Execute
3. **–£–≤—ñ–π–¥—ñ—Ç—å**: –ó–Ω–∞–π–¥—ñ—Ç—å `POST /login` ‚Üí Execute ‚Üí –°–∫–æ–ø—ñ—é–π—Ç–µ `accessToken`
4. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å**: –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å üîí "Authorize" ‚Üí –í–≤–µ–¥—ñ—Ç—å `Bearer –í–ê–®_–¢–û–ö–ï–ù`
5. **–¢–µ—Å—Ç—É–π—Ç–µ**: –°–ø—Ä–æ–±—É–π—Ç–µ `GET /auth/profile`

## üéØ –û—Å–Ω–æ–≤–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ú–µ—Ç–æ–¥ | –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –û–ø–∏—Å | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |
|-------|----------|------|-------------|
| `GET` | `/` | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ API | ‚ùå |
| `POST` | `/register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è | ‚ùå |
| `POST` | `/login` | –í—Ö—ñ–¥ | ‚ùå |
| `POST` | `/refresh` | –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ | ‚ùå |
| `GET` | `/auth/profile` | –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | ‚úÖ |
| `PUT` | `/auth/profile` | –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é | ‚úÖ |
| `GET` | `/auth/users` | –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ | ‚úÖ |

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:
–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `appsettings.json`:
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=myapp.db"
  }
}
```

### –ó–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø–∞—Ä–æ–ª—ñ–≤:
–£ `Program.cs` –∑–Ω–∞–π–¥—ñ—Ç—å:
```csharp
builder.Services.AddIdentityCore<User>(options =>
{
    options.Password.RequiredLength = 8;        // –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞
    options.Password.RequireDigit = true;       // –í–∏–º–∞–≥–∞—Ç–∏ —Ü–∏—Ñ—Ä–∏
    options.Password.RequireUppercase = false;  // –ù–µ –≤–∏–º–∞–≥–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ –ª—ñ—Ç–µ—Ä–∏
    // ...
});
```

### –ó–º—ñ–Ω–∞ —Ç–µ—Ä–º—ñ–Ω—É –¥—ñ—ó —Ç–æ–∫–µ–Ω—ñ–≤:
```csharp
.AddBearerToken(IdentityConstants.BearerScheme, options =>
{
    options.BearerTokenExpiration = TimeSpan.FromHours(2);  // 2 –≥–æ–¥–∏–Ω–∏
    options.RefreshTokenExpiration = TimeSpan.FromDays(14); // 14 –¥–Ω—ñ–≤
});
```

## üêõ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "dotnet command not found"
**–†—ñ—à–µ–Ω–Ω—è**: –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å .NET 9 SDK –∑ https://dotnet.microsoft.com/download

### –ü—Ä–æ–±–ª–µ–º–∞: "Port already in use"
**–†—ñ—à–µ–Ω–Ω—è**: –ó–º—ñ–Ω—ñ—Ç—å –ø–æ—Ä—Ç –≤ `Properties/launchSettings.json`

### –ü—Ä–æ–±–ª–µ–º–∞: "Database locked"
**–†—ñ—à–µ–Ω–Ω—è**: –ó–∞–∫—Ä–∏–π—Ç–µ –≤—Å—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ SQLite –∞–±–æ –≤–∏–¥–∞–ª—ñ—Ç—å `identity.db`

### –ü—Ä–æ–±–ª–µ–º–∞: "Unauthorized" –ø—Ä–∏ –¥–æ—Å—Ç—É–ø—ñ –¥–æ API
**–†—ñ—à–µ–Ω–Ω—è**: 
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π —Ç–æ–∫–µ–Ω
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Ç–æ–∫–µ–Ω –Ω–µ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç: `Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù`

## üìö –©–æ –¥–∞–ª—ñ?

1. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é**: `README.md`
2. **–í–∏–≤—á—ñ—Ç—å –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É**: `ARCHITECTURE.md`
3. **–ü—Ä–æ–π–¥—ñ—Ç—å –Ω–∞–≤—á–∞–Ω–Ω—è**: `STUDENT_GUIDE.md`
4. **–ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ø—Ä–∏–∫–ª–∞–¥–∏**: `EXAMPLES.md`
5. **–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ API**: `IdentityAuth.http`

## üéì –ù–∞–≤—á–∞–ª—å–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

### –õ–µ–≥–∫–∏–π —Ä—ñ–≤–µ–Ω—å:
- [ ] –î–æ–¥–∞–π—Ç–µ –ø–æ–ª–µ "–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è" –¥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- [ ] –°—Ç–≤–æ—Ä—ñ—Ç—å –µ–Ω–¥–ø–æ—ñ–Ω—Ç –¥–ª—è –∑–º—ñ–Ω–∏ –ø–∞—Ä–æ–ª—è
- [ ] –î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é email

### –°–µ—Ä–µ–¥–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å:
- [ ] –†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (Admin, User)
- [ ] –î–æ–¥–∞–π—Ç–µ –µ–Ω–¥–ø–æ—ñ–Ω—Ç —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤
- [ ] –°—Ç–≤–æ—Ä—ñ—Ç—å middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤

### –°–∫–ª–∞–¥–Ω–∏–π —Ä—ñ–≤–µ–Ω—å:
- [ ] –î–æ–¥–∞–π—Ç–µ –¥–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é
- [ ] –Ü–Ω—Ç–µ–≥—Ä—É–π—Ç–µ Google OAuth
- [ ] –†–µ–∞–ª—ñ–∑—É–π—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–∫—É email –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

## üí° –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó
dotnet ef migrations add AddNewField

# –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
dotnet ef database update

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
dotnet ef database drop

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
dotnet run --verbosity detailed

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
dotnet run --environment Development

# –ó–±—ñ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
dotnet publish -c Release
```

**–£—Å–ø—ñ—Ö—ñ–≤ —É –Ω–∞–≤—á–∞–Ω–Ω—ñ! üéâ**
